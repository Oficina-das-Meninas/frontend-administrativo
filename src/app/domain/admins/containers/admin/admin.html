<div class="flex flex-col items-center mx-auto bg-gradient">
  <mat-card class="w-full max-w-[30rem]" appearance="outlined">

    <div class="w-full max-w-[30rem] mt-4 ml-4">
      <button
        mat-icon-button
        (click)="goBack()"
        class="back-button !text-gray-700 hover:!text-gray-900"
        matTooltip="Voltar para listagem">
        <mat-icon>arrow_back</mat-icon>
      </button>
    </div>


    <mat-card-header class="mb-6 !text-4xl !font-bold !text-gray-900">
      <mat-card-title>
        {{ isEditMode() ? 'Editar Administrador' : 'Criar Administrador' }}
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="adminForm" (ngSubmit)="onSubmit()" class="flex flex-col gap-6">

        <app-form-input
          formControlName="name"
          label="Nome*"
          placeholder="Digite o nome do administrador"
          prefixIcon="person"
          [maxLength]="100"
          [errorMessage]="getErrorMessage('name')">
        </app-form-input>

        <app-form-input
          formControlName="email"
          label="Email*"
          placeholder="Digite o email do administrador"
          prefixIcon="mail"
          [maxLength]="100"
          [errorMessage]="getErrorMessage('email')">
        </app-form-input>

        <app-form-input
          formControlName="password"
          type="password"
          label="Senha*"
          placeholder="Digite a senha do administrador"
          prefixIcon="lock"
          [maxLength]="14"
          [errorMessage]="getErrorMessage('password')">
        </app-form-input>

        <div class="flex justify-end mt-6">
          <button
            matButton="filled"
            color="primary"
            type="submit"
            [matTooltip]="!adminForm.valid ? 'Preencha todos os campos' : ''"
            [disabled]="!adminForm.valid || isLoading()"
            [disabledInteractive]="!adminForm.valid || isLoading()"
            class="!px-16 !py-6 font-semibold text-base rounded-md normal-case tracking-normal">

            <div class="flex items-center gap-2">
              @if (isLoading()) {
                <mat-spinner diameter="20" color="accent"></mat-spinner>
              }
              {{ isEditMode() ? 'Atualizar Administrador' : 'Criar Administrador' }}
            </div>
          </button>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>
