<app-transparency-accordion 
  [content]="content()" 
  (isDeleteItem)="openDeleteItemDialog($event)"
  (isCollaboratorChanges)="onUpdateAllCollaborators($event)"
>
    <ng-container categoryActions>
      <span 
        class="material-symbols-outlined hover:text-[#bf1469] cursor-pointer" 
        (click)="openDeleteCategoryDialog()"
      >
        delete
      </span>
      <span 
        class="material-symbols-outlined hover:text-[#bf1469] cursor-pointer" 
        (click)="openUpdateCategoryName()"
      >
        edit_square
      </span>
    </ng-container>
    <ng-container documentActions>
      <div class="w-fit">
        <button 
          mat-fab
          (click)="openAddDocumentDialog()"
          matTooltip="Adicionar Documento"
          class="w-auto! px-4!"
        >
          <span class="text-base font-semibold">Adicionar</span>
        </button>
      </div>
    </ng-container>
    <ng-container collaboratorActions>
      <div class="w-fit">
        <button 
          mat-fab 
          (click)="openAddCollaboratorDialog()"
          matTooltip="Adicionar Colaborador"
          class="w-auto! px-4!"
        >
          <span class="text-sm font-semibold">Adicionar</span>
        </button>
      </div>
    </ng-container>
</app-transparency-accordion>

<ng-template #addDocumentDialog>
  <app-dialog title="Adicionar Documento" [formDialog]="documentForm">
    <ng-container dialogContent>
      <div [formGroup]="documentForm" class="flex flex-col gap-2">
        <app-form-input
          formControlName="title"
          label="Título*"
          placeholder="Digite o título do documento"
          errorMessage="Título do documento inválido"
        />
        <app-date-picker
          formControlName="effectiveDate"
          label="Data de Efetivação"
          placeholder="DD/MM/AAAA"
          errorMessage="Data de efetivação inválida"
          class="w-full" 
        />
        <app-upload-file
          formControlName="file"
          label="Documento*"
          placeholder="Selecione um arquivo"
          accept=".pdf,.jpg,.jpeg,.png"
          icon="attach_file"
          errorMessage="Documento inválido"
        />
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onAddDocument()" [disabled]="!documentForm.valid">
        <span class="text-lg font-semibold">Adicionar</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #addCollaboratorDialog>
  <app-dialog title="Adicionar Colaborador" [formDialog]="collaboratorForm">
    <ng-container dialogContent>
      <div [formGroup]="collaboratorForm" class="flex flex-col gap-2">
        <div class="pb-6">
          <app-upload-profile-image formControlName="image" size="w-40"></app-upload-profile-image>
        </div>
        <app-form-input
          formControlName="name"
          label="Nome*"
          placeholder="Digite o nome do(a) colaborador(a)"
          errorMessage="Nome do(a) colaborador(a) inválido"
        />
        <app-form-input
          formControlName="role"
          label="Cargo*"
          placeholder="Digite o cargo do(a) colaborador(a)"
          errorMessage="Cargo do(a) colaborador(a) inválido"
        />
        <app-form-input
          formControlName="description"
          label="Descrição*"
          placeholder="Digite a Descrição do cargo"
          errorMessage="Descrição do cargo inválida"
        />
      </div>  
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onAddCollaborator()" [disabled]="!collaboratorForm.valid">
        <span class="text-lg font-semibold">Adicionar</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #updateCategoryNameDialog>
  <app-dialog title="Editar Categoria" [formDialog]="categoryForm">
    <ng-container dialogContent>
      <div [formGroup]="categoryForm" class="flex flex-col">
        <app-form-input
          formControlName="name"
          label="Nome*"
          placeholder="Digite o nome da categoria"
          errorMessage="Nome de categoria inválido"
        />
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onUpdateCategoryName()" [disabled]="!categoryForm.valid">
        <span class="text-lg font-semibold">Editar</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #deleteCategoryDialog>
  <app-dialog title="Remover Categoria">
    <ng-container dialogContent>
      <div>
        <p>
          Deseja remover esta categoria 
          <span class="font-bold">{{ content().categoryName }}</span>?
        </p>
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onDeleteCategoryDialog()">
        <span class="text-lg font-semibold">Remover</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #deleteItemDialog>
  <app-dialog [title]="`Remover ${ content().documents ? 'Documento' : 'Colaborador' }`">
    <ng-container dialogContent>
      <div>
        <p>
          Deseja remover {{ content().documents ? 'o documento' : 'o(a) colaborador(a)' }}
          <span class="font-bold">{{ deleteItem.name }}</span>?
        </p>
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onDeleteItemDialog()">
        <span class="text-lg font-semibold">Remover</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>