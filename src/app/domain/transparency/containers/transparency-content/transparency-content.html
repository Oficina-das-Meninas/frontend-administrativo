<app-transparency-accordion [content]="content()" (isDeleteItem)="openDeleteItemDialog($event)">
    <ng-container categoryActions>
      <span 
        class="material-symbols-outlined hover:text-[#bf1469] cursor-pointer" 
        (click)="openDeleteCategoryDialog()"
      >
        delete
      </span>
      <span 
        class="material-symbols-outlined hover:text-[#bf1469] cursor-pointer" 
        (click)="openUpdateCategoryName()"
      >
        edit_square
      </span>
    </ng-container>
    <ng-container documentActions>
      <div class="flex gap-2">
        <button 
          mat-fab
          (click)="openAddDocumentDialog()"
          matTooltip="Adicionar Documento"
          class="md:w-auto! md:px-4!"
        >
          <span class="text-sm font-semibold">Adicionar</span>
        </button> 
      </div>
    </ng-container>
    <ng-container collaboratorActions>
      <div class="flex gap-2">
        <button 
          mat-fab 
          (click)="openAddCollaboratorDialog()"
          matTooltip="Adicionar Colaborador"
          class="md:w-auto! md:px-4!"
        >
          <span class="text-sm font-semibold">Adicionar</span>
        </button>
      </div>
    </ng-container>
</app-transparency-accordion>

<ng-template #addDocumentDialog>
  <app-dialog title="Adicionar Documento">
    <ng-container dialogContent>
      <div [formGroup]="documentForm" class="flex flex-col">
        <mat-form-field appearance="outline">
          <mat-label>Título</mat-label>
          <input 
            matInput
            formControlName="title" 
            placeholder="Título do documento" 
          >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Data de Efetivação</mat-label>
          <input
            matInput
            [matDatepicker]="picker"
            formControlName="effectiveDate"
            placeholder="dd/mm/aaaa"
            appMaskDate
          >
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Documento</mat-label>

          <input
            matInput
            type="text"
            [value]="documentForm.get('file')?.value?.name || ''"
            placeholder="Selecione um arquivo"
            readonly
            (click)="fileInput.click()"
          />

          <button
            mat-icon-button
            matSuffix
            (click)="fileInput.click()"
            type="button"
          >
            <span class="material-symbols-outlined">
              attach_file
            </span>
          </button>
        </mat-form-field>
        <input
          #fileInput
          type="file"
          accept=".pdf,.jpg,.jpeg,.png"
          (change)="onFileSelected($event)"
          hidden
        />
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onAddDocument()" [disabled]="!documentForm.valid">
        <span class="text-lg font-semibold">Adicionar</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #addCollaboratorDialog>
  <app-dialog title="Adicionar Colaborador">
    <ng-container dialogContent>
      <div [formGroup]="collaboratorForm" class="flex flex-col">
        <div class="pb-6">
          <app-upload-profile-image formControlName="image" size="w-40"></app-upload-profile-image>
        </div>
        <mat-form-field appearance="outline">
          <mat-label>Nome</mat-label>
          <input 
            matInput
            formControlName="name" 
            placeholder="Nome do(a) colaborador(a)" 
          >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Cargo</mat-label>
          <input 
            matInput
            formControlName="role" 
            placeholder="Cargo do(a) colaborador(a)" 
          >
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Descrição</mat-label>
          <input 
            matInput
            formControlName="description" 
            placeholder="Descrição do cargo" 
          >
        </mat-form-field>
      </div>  
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onAddCollaborator()" [disabled]="!collaboratorForm.valid">
        <span class="text-lg font-semibold">Adicionar</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #updateCategoryNameDialog>
  <app-dialog title="Editar Categoria">
    <ng-container dialogContent>
      <div [formGroup]="categoryForm" class="flex flex-col">
        <mat-form-field appearance="outline">
          <mat-label>Nome</mat-label>
          <input 
            matInput
            formControlName="name"
            placeholder="Nome da categoria" 
          >
        </mat-form-field>
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onUpdateCategoryName()" [disabled]="!categoryForm.valid">
        <span class="text-lg font-semibold">Editar</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #deleteCategoryDialog>
  <app-dialog title="Remover Categoria">
    <ng-container dialogContent>
      <div>
        <p>
          Deseja remover esta categoria 
          <span class="font-bold">{{ content().categoryName }}</span>?
        </p>
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onDeleteCategoryDialog()">
        <span class="text-lg font-semibold">Remover</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>

<ng-template #deleteItemDialog>
  <app-dialog [title]="`Remover ${ content().documents ? 'Documento' : 'Colaborador' }`">
    <ng-container dialogContent>
      <div>
        <p>
          Deseja remover este {{ content().documents ? 'documento' : 'colaborador' }}
          <span class="font-bold">{{ deleteItem.name }}</span>?
        </p>
      </div>
    </ng-container>
    <ng-container dialogConfirmButton>
      <button matButton="filled" (click)="onDeleteItemDialog()">
        <span class="text-lg font-semibold">Remover</span>
      </button>
    </ng-container>
  </app-dialog>
</ng-template>