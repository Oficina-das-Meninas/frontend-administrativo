<div class="flex justify-center items-center">
  <div
    class="relative aspect-square rounded-full cursor-pointer overflow-visible bg-[#D9D9D9] flex items-center justify-center drop-shadow-lg/25"
    [ngClass]="[
      errorFile || errorSize ? 'animate-shake border border-[#ba1a1a]' : '',
      dragging ? 'border-4 border-dashed border-[#6e7e8bb4]' : '',
      size()
    ]"
  >
    <label
      for="inpOne"
      class="relative w-full h-full flex items-center justify-center rounded-full cursor-pointer overflow-hidden"
      (dragenter)="onDragEnter()"
      (dragleave)="onDragLeave($event)"
      (dragover)="onDragOver($event)"
      (drop)="onDrop($event); dragging = false"
      role="button"
      tabindex="0"
      (keydown.enter)="triggerFileInput()"
      (keydown.space)="triggerFileInput()"
    >
      @if (image.previewUrl) {
        <img
          [src]="image.previewUrl"
          [alt]="image.previewUrl"
          [ngClass]="{
            'object-cover bg-[#D9D9D9]': image.previewUrl,
          }"
          class="w-full h-full rounded-full"
        />

        @if (dragging) {
          <div class="absolute inset-0 bg-black opacity-50 rounded-full z-40"></div>
        }
      } @else {
        <span class="text-center text-sm p-4">
          Clique ou Arraste para adicionar uma imagem
        </span>
      }
    </label>

    @if (image.previewUrl) {
      <button
        type="button"
        class="absolute bottom-0 -right-0.5 z-50 w-7 h-7 bg-[#bf1469] rounded-full hover:bg-[#8c0e4c] flex items-center justify-center cursor-pointer"
        (click)="removeImage()"
      >
        <span class="material-symbols-outlined text-white">
          close
        </span>
      </button>
    }

    <input
      #fileInput
      id="inpOne"
      type="file"
      class="hidden"
      accept="image/*"
      (change)="onFileSelected($event)"
    />
  </div>
</div>

@if (errorFile) {
  <p class="mt-2 text-[12px] text-[#ba1a1a] text-center">
    Somente imagens são permitidas
  </p>
}

@if (errorSize) {
  <p class="mt-2 text-[12px] text-[#ba1a1a] text-center">
    A imagem selecionada é muito grande. Por favor, escolha uma imagem com até 15MB.
  </p>
}
